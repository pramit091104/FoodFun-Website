<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Book a Table - FoodFun Restaurant</title>
  <meta name="description" content="Reserve your table at FoodFun" />
  <meta name="author" content="FoodFun" />

  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700;800&display=swap"
    rel="stylesheet">
    <link rel="icon" href="img/logo.png">
  <link rel="stylesheet" href="styles.css">
  <style>
    /* Additional page-specific styles */
    .page-header {
      padding-top: 128px;
      padding-bottom: 40px;
    }

    .page-header-content {
      text-align: center;
      max-width: 800px;
      margin: 0 auto 64px;
    }

    .page-title {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 16px;
    }

    .page-description {
      color: var(--gray-medium);
      font-size: 1.125rem;
      margin-top: 24px;
    }

    .coming-soon {
      text-align: center;
      padding: 80px 0;
      color: var(--gray-medium);
    }

    .booking-form-wrapper {
      max-width: 600px;
      margin: 0 auto;
    }

    .booking-form {
      display: grid;
      gap: 16px;
      background-color: #fff;
      padding: 32px;
      border-radius: 12px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    }

    .booking-form .form-group {
      display: flex;
      flex-direction: column;
    }

    .booking-form label {
      font-weight: 600;
      margin-bottom: 6px;
    }

    .booking-form input,
    .booking-form textarea {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
    }

    .booking-form .btn-primary {
      background-color: #ff6b00;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.3s;
    }

    .booking-form .btn-primary:hover {
      background-color: #e65c00;
    }

    .user-info {
      background-color: #f8f9fa;
      padding: 15px;
      border-radius: 6px;
      margin-bottom: 20px;
    }
  </style>
</head>

<body>
  <div id="header"></div> <!-- Header will be loaded here -->
    
  <section class="page-header">
    <div class="container">
      <div class="page-header-content">
        <h1 class="page-title">
          Book a <span class="text-orange">Table</span>
        </h1>
        <div class="section-divider"></div>
        <p class="page-description">
          Reserve your table now for an unforgettable dining experience.
        </p>
      </div>

      <div class="coming-soon">
        <div class="booking-form-wrapper">
          <div id="userInfo" class="user-info">
            <!-- User info will be populated by JavaScript -->
          </div>
          <form class="booking-form" id="bookingForm">
            <div class="form-group">
              <label for="date">Date</label>
              <input type="date" id="date" name="date" required />
            </div>

            <div class="form-group">
              <label for="time">Time</label>
              <input type="time" id="time" name="time" required />
            </div>

            <div class="form-group">
              <label for="people">Number of People</label>
              <input type="number" id="people" name="people" placeholder="How many?" min="1" max="20" required />
            </div>

            <div class="form-group">
              <label for="message">Special Requests</label>
              <textarea id="message" name="message" rows="4" placeholder="Any special instructions?"></textarea>
            </div>

            <button type="submit" class="btn-primary">Book Table</button>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer Section -->
  <footer class="footer">
    <div class="container footer-container">
      <div class="footer-grid">
        <!-- Column 1 - About -->
        <div class="footer-column">
          <a href="index.html" class="logo">
            <div class="logo-icon">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M2 12H14M4 12V6C4 3.79086 5.79086 2 8 2C10.2091 2 12 3.79086 12 6V12" stroke="white"
                  strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
              </svg>
            </div>
            <span class="logo-text">Food<span class="text-orange">Fun</span></span>
          </a>
          <p class="footer-text">
            Delicious food in a comfortable atmosphere, creating memories with every bite.
          </p>
          <div class="social-links">
            <a href="#" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path>
              </svg>
            </a>
            <a href="#" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path
                  d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z">
                </path>
              </svg>
            </a>
            <a href="#" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect width="20" height="20" x="2" y="2" rx="5" ry="5"></rect>
                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                <line x1="17.5" x2="17.51" y1="6.5" y2="6.5"></line>
              </svg>
            </a>
            <a href="#" class="social-link">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path
                  d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z">
                </path>
                <polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>
              </svg>
            </a>
          </div>
        </div>

        <!-- Column 2 - Opening Hours -->
        <div class="footer-column">
          <h3 class="footer-heading">Opening Hours</h3>
          <ul class="footer-list">
            <li class="footer-list-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="icon-small">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
              </svg>
              <div>
                <p class="footer-info-title">Monday - Friday</p>
                <p class="footer-info-subtitle">8:00 am - 9:00 pm</p>
              </div>
            </li>
            <li class="footer-list-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="icon-small">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
              </svg>
              <div>
                <p class="footer-info-title">Saturday</p>
                <p class="footer-info-subtitle">8:00 am - 10:00 pm</p>
              </div>
            </li>
            <li class="footer-list-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="icon-small">
                <circle cx="12" cy="12" r="10"></circle>
                <polyline points="12 6 12 12 16 14"></polyline>
              </svg>
              <div>
                <p class="footer-info-title">Sunday</p>
                <p class="footer-info-subtitle">9:00 am - 8:00 pm</p>
              </div>
            </li>
          </ul>
        </div>

        <!-- Column 3 - Contact Info -->
        <div class="footer-column">
          <h3 class="footer-heading">Contact Info</h3>
          <ul class="footer-list">
            <li class="footer-list-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="icon-small">
                <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
              <p>Pune, Maharashtra - Loni Kalbhor, India</p>
            </li>
            <li class="footer-list-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="icon-small">
                <path
                  d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                </path>
              </svg>
              <p><a href="tel: +91 7041887184">+91 7041887184</a></p>
            </li>
            <li class="footer-list-item">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="icon-small">
                <rect width="20" height="16" x="2" y="4" rx="2"></rect>
                <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path>
              </svg>
              <p>foodfunenquiry@gmail.com</p>
            </li>
          </ul>
        </div>

        <!-- Column 4 - Newsletter -->
        <div class="footer-column">
          <h3 class="footer-heading">Newsletter</h3>
          <p class="footer-text">
            Subscribe to our newsletter for regular updates on special offers.
          </p>
          <form class="newsletter-form">
            <input type="email" placeholder="Your Email" class="newsletter-input">
            <button class="btn-primary">Subscribe</button>
          </form>
        </div>
      </div>

      <!-- Copyright -->
      <div class="copyright">
        <p>Â© <span id="currentYear"></span> FoodFun. All Rights Reserved.</p>
      </div>
    </div>
  </footer>

  <script src="script.js"></script>
  <script>
    // Dynamically load header
    fetch('header.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('header').innerHTML = data;
      });
  </script>
  <script>
    // Check if user is logged in
    window.onload = function() {
      const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
      const userInfoDiv = document.getElementById('userInfo');
      const bookingForm = document.getElementById('bookingForm');
      
      if (currentUser) {
        userInfoDiv.innerHTML = `
          <div class="user-details">
            <p><strong>Name:</strong> ${currentUser.name}</p>
            <p><strong>Email:</strong> ${currentUser.email}</p>
          </div>
        `;
      } else {
        alert('Please login to book a table');
        window.location.href = 'login.html';
      }

      // Handle form submission
      bookingForm.addEventListener('submit', function(event) {
        event.preventDefault();
        
        const date = document.getElementById('date').value;
        const time = document.getElementById('time').value;
        const people = document.getElementById('people').value;
        const message = document.getElementById('message').value;

        if (!date || !time || !people) {
          alert('Please fill in all required fields');
          return;
        }

        const booking = {
          user: currentUser,
          date: date,
          time: time,
          people: people,
          message: message
        };

        // Store booking in local storage
        const bookings = JSON.parse(localStorage.getItem('bookings')) || [];
        bookings.push(booking);
        localStorage.setItem('bookings', JSON.stringify(bookings));

        // Send Gmail notification
        sendBookingEmail(booking);

        alert('Table booked successfully!');
        window.location.href = 'index.html';
      });

      // Function to send booking email
      function sendBookingEmail(booking) {
        const emailData = {
          to: currentUser.email,
          subject: 'Table Booking Confirmation - FoodFun Restaurant',
          body: `
            Dear ${currentUser.name},
            
            Your table has been successfully booked at FoodFun Restaurant.
            
            Booking Details:
            - Date: ${booking.date}
            - Time: ${booking.time}
            - Number of People: ${booking.people}
            ${booking.message ? `- Special Request: ${booking.message}` : ''}
            
            Thank you for choosing FoodFun Restaurant!
            
            Best regards,
            FoodFun Team
          `
        };

        // Send email using Gmail API
        fetch('https://gmail.googleapis.com/gmail/v1/users/me/messages/send', {
          method: 'POST',
          headers: {
            'Authorization': 'Bearer ' + getGmailToken(),
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            raw: btoa(
              `To: ${emailData.to}\r\n` +
              `Subject: ${emailData.subject}\r\n` +
              `Content-Type: text/plain; charset=UTF-8\r\n\r\n` +
              emailData.body
            ).replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, '')
          })
        })
        .then(response => response.json())
        .then(data => console.log('Email sent:', data))
        .catch(error => console.error('Error sending email:', error));
      }

      // Function to get Gmail OAuth token
      function getGmailToken() {
        // This is a placeholder - you'll need to implement proper OAuth2 authentication
        // You can use Google's OAuth2 client library for this
        return 'YOUR_GMAIL_ACCESS_TOKEN';
      }
    };

    // Handle login button
    function handleLogin() {
      const currentUser = JSON.parse(sessionStorage.getItem('currentUser'));
      if (currentUser) {
        sessionStorage.removeItem('currentUser');
        window.location.reload();
      } else {
        window.location.href = 'login.html';
      }
    }
  </script>
</body>

</html>